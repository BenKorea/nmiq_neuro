---
title: "오픈소스를 이용한 Neuroimaging 영상품질∙선량 평가시스템의 구축과 활용 방안"
authors:
  - name: Byung Il Kim
    affiliation: Department of Nuclear Medicine, Korea Cancer Center Hospital, Korea Institute of Radiological and Medical Sciences
date: "2025-12-01"
# bibliography: references.bib
---

## 서론

한국 사회의 고령화는 뇌신경 퇴행성 질환의 유병률을 빠르게 증가시키고 있으며, 이에 따라 뇌 도파민수송체 영상 및 뇌 베타아밀로이드 PET 검사의 임상적 활용도 또한 크게 확대되고 있다. 이러한 검사들은 방사선을 사용하기에 전문학회에서는 환자들에게 정당하게 사용되도록 노력하면서도 영상의 품질과 방사선량을 최적화를 위해 노력해야 한다.  국제방사선방호학회(ICRP, International Committee ofr Radiation Protection)도 **선량(dose)**과 함께 **영상품질(image quality, IQ)**을 반드시 함께 고려해야 한다고 권고하고 있다.

영상검사의 선량을 관리하기 위해서는 일부 병원에서는 이미 상용화된 선량관리 프로그램을 사용해오고 있었다. 하지만 이러한 방식은 전국 규모의 조사에는 적합하지 않을 뿐더러 고비용이고 원하는방식으로 수정하기도 어렵다. 그리고 영상품질에 대한 기능은 전무하기 때문에 영상품질평가는 수작업으로 해야 하는 매우 큰 제약이 있어 왔다. 

저자는 위 제한점을 극복하기 위해 오픈소스 기반의 Neuroimaging 영상품질∙선량 평가 시스템의 구축을 진행하고 있다. 이 고찰에서는 amyloid Brain PET QC를 중심으로 오픈소스를 이용한 Neuroimaging 영상품질∙선량 평가시스템의 구축과 활용 방안을 논의하고자 한다.

## Brain PET 관심영역 설정
영상품질을 평가는 어떠한 관심영역을 설정하느냐에 따라 그 결과가 크게 달라질 수 있다. 아밀로이드 PET의 경우 문헌상에서 정상섭취가 재현성이 있다고 알려진 reference region을 우선 관심영역으로 선택하였다.
- cerebellar cortex
- cerebellar white matter
- pons
- centrum ovale   
그리고 배경영역으로 ventricle을 선택하였다.

이를 관심영역을 이용하면 아래의 영상품질지표들을 도출할 수 있다.
- SNR (Signal-to-Noise Ratio)
- CNR (Contrast-to-Noise Ratio)
- Noise Index (Cerebellar WM 또는 Centrum semiovale WM의 표준편차를 이용)
- Ventricular Uptake Index: μ(ventricle) / μ(cerebellar cortex)
- Edge Sharpness Index: GM–WM 경계의 10–90% transition 거리


## Brain PET 관심영역 자동추출
Brain PET 영상으로부터 관심영역을 추출하는 방법으로써 자동화가 가능한 방법은 크게 3가지가 있다. PET template를 사용하는 방법, PET/CT의 CT를 사용하는 방법, MRI를 사용하는 방법이 있다. 문헌상으로 고찰 및 저자의 경험으로는 정확도는 MRI를 이용하는 방법이 압도적으로 우월한다. 그래서 MRI를 이용하는 방법을 고찰하였다. (비록 brain PET을 검사한 모든 환자들에서 MRI가 있지는 않겠지만 최근 정량분석을 위해 3D MRI가 같이 검사되는 경우가 많아 전수조사는 아니지만 PET 검사 프로트토콜에 따른 영상품질을 평가하는 목적으로는 가능하다고 판단하였다.)


### SPM 
전통적 정합 도구로 SPM이 사용되었왔다. 환자의 MRI를 NMI 템플릿으로 정합하고, 템플릿 공간의 ROI를 역변환하여 환자 공간에 매핑하는 방식이다. SPM은 MATLAB 기반이므로 라이선스 비용이 발생하는 단점이 있다.

### FreeSurfer
FreeSurfer는 뇌 MRI의 정밀 segmentation에 널리 사용되는 오픈소스 소프트웨어이다. FreeSurfer는 표준 템플릿 공간(MNI305 또는 fsaverage)에 기반한 다양한 뇌 영역의 ROI를 제공하며, 환자의 MRI를 템플릿에 정합한 후 역변환하여 환자 공간에 ROI를 매핑할 수 있다. FreeSurfer는 매우 정밀한 segmentation을 제공하지만 처리 시간이 오래 걸리는 단점이 있다(수 시간 소요).

#### FastSurfer
FastSurfer는 FreeSurfer 팀이 만든 딥러닝 기반의 FreeSurfer 대체/가속 모델이며 핵심 목적은 “정확도는 유지하면서 속도를 극적으로 향상시키는 것”이다. 
GitHub의 링크 (https://github.com/Deep-MI/FastSurfer)를 통해서 소스를 다운로드 할 수 있다.
이 오픈소스의 장점은 FreeSurfer 수준의 정밀 segmentation을 1–2분 내 수행할 수 있어 amyloid PET, FDG PET 등 ROI mapping에 최적화되어 있다는 점이다.

#### SynthSeg
3D 1mm slice의 MRI가 아니더라도 강건한 segmentation이 가능한 딥러닝 모델이다. 따라서 다기관 연구에서 우선 고려된다. GitHub 링크(https://github.com/BBillot/SynthSeg)를 통해 다운로드 할 수 있다.

#### 기타모델
SLANT, HD-BET 등 다양한 딥러닝 기반 segmentation 모델이 존재한다. 자세한 검토는 생략하며 저자는 FastSurfer 또는 SynthSeg를 사용하는 것을 검토하고 있다.



5. 연구용 PACS(Open-source PACS/VNA)

원문 내용을 그대로 유지하며 논문 형식으로 정돈:

5.1 Orthanc (가장 널리 사용되는 연구용 PACS)

완전한 DICOM PACS / REST API 제공

PET·MRI 자동 다운로드 가능

Python API 지원

연구용 pipeline 연동 최적

5.2 DCM4CHEE

Enterprise-grade PACS

고성능, 확장성 우수

PET/MRI 완전 지원

5.3 XNAT

PACS라기보다는 연구용 이미지 플랫폼

대규모 PET/MR annotation 및 메타데이터 관리 최적

5.4 기타 솔루션

Conquest DICOM Server

Weasis + dcm4chee

OHIF + Orthanc 조합

6. 가명화(Pseudonymization)의 필요성

본 절은 원문을 그대로 유지하되 논문형식으로 간결하게 정리:

의료영상에는 환자식별정보가 포함되어 있으므로 연구용 PACS에 원본을 저장하는 것은 법적·윤리적 문제가 있음

개인정보보호법(2025), 가명정보 처리 가이드라인(2024)에 따라
연구용 PACS는 가명화 PACS로 전환되어야 함

7. FPE(Format Preserving Encryption)를 이용한 가명화 기술
7.1 왜 FPE가 필요한가?

PatientID, StudyInstanceUID 등은 형식이 변경되면 PACS 인덱싱 오류 발생

FPE는 형식을 유지한 상태로 암호화 가능

7.2 FF3–1 (NIST 표준)

FF3의 취약점을 해결한 최신 국제표준

PACS 가명화 구현에 가장 적합

7.3 Python 구현 예시

(원문 예시 유지)

8. 선량정보 추출을 위한 오픈소스

DoseUtility

OpenREM

pydicom/dcm

Python 기반 DICOM metadata extractor

9. 개인정보보호 기반 인프라 서비스

원문 소제목 유지:
Vault, Bitwarden, PostgreSQL, ELK, Keycloak, LDAP, Docker, Python, GitHub

이들 서비스는 연구용 PACS, 가명화 엔진, AI 학습 파이프라인을 통합하는 데 필수적인 인프라이다.

10. 활용방안
10.1 영상품질과 선량을 동시에 고려하는 품질관리(QC)

ROI 기반 IQ 평가 + 자동 선량 추출 시스템을 통합하면
전국 단위의 Brain PET 품질관리 체계 구축이 가능하다.

10.2 인공지능 학습을 위한 활용

원문 내용을 논문형식으로 정돈:

Brain PET은 CT/MRI 대비 slice 수가 적고 구조적 복잡도가 낮아 인공지능 학습에 오히려 유리

자동 IQ 평가, 자동 segmentation, 가명화 기반 연구 인프라를 갖추면
다기관 AI 학습 데이터셋 생성이 구조적으로 쉬워짐

라벨링의 어려움은 LLM 기반 AI agent를 통해 판독문의 자동 메타데이터화로 해결 가능

결론

본 논문에서는 오픈소스를 기반으로 한 Neuroimaging 영상품질∙선량 평가시스템의 구축 가능성을 고찰하였다. Brain PET 영상의 자동 품질평가, 3D MRI 기반 segmentation, 연구용 PACS 및 가명화 기술, 그리고 자동화된 선량 추출과 판독문 메타데이터화는 이미 모두 오픈소스를 통해 구현 가능하다. 이러한 생태계는 향후 Neuroimaging 기반 인공지능 학습 인프라의 표준적 기반이 될 것이다.
